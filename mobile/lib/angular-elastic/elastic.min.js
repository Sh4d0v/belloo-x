if(typeof module!=="undefined"&&typeof exports!=="undefined"&&module.exports===exports){module.exports="monospaced.elastic"}angular.module("monospaced.elastic",[]).constant("msdElasticConfig",{append:""}).directive("msdElastic",["$timeout","$window","msdElasticConfig",function(a,b,c){return{require:"ngModel",restrict:"A, C",link:function(z,n,j,x){var A=n[0],e=n;if(A.nodeName!=="TEXTAREA"||!b.getComputedStyle){return}e.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"});var C=A.value;A.value="";A.value=C;var i=j.msdElastic?j.msdElastic.replace(/\\n/g,"\n"):c.append,f=angular.element(b),w="position: absolute; top: -999px; right: auto; bottom: auto;left: 0; overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",d=angular.element('<textarea aria-hidden="true" tabindex="-1" style="'+w+'"/>').data("elastic",true),u=d[0],B=getComputedStyle(A),y=B.getPropertyValue("resize"),k=B.getPropertyValue("box-sizing")==="border-box"||B.getPropertyValue("-moz-box-sizing")==="border-box"||B.getPropertyValue("-webkit-box-sizing")==="border-box",l=!k?{width:0,height:0}:{width:parseInt(B.getPropertyValue("border-right-width"),10)+parseInt(B.getPropertyValue("padding-right"),10)+parseInt(B.getPropertyValue("padding-left"),10)+parseInt(B.getPropertyValue("border-left-width"),10),height:parseInt(B.getPropertyValue("border-top-width"),10)+parseInt(B.getPropertyValue("padding-top"),10)+parseInt(B.getPropertyValue("padding-bottom"),10)+parseInt(B.getPropertyValue("border-bottom-width"),10)},t=parseInt(B.getPropertyValue("min-height"),10),p=parseInt(B.getPropertyValue("height"),10),s=Math.max(t,p)-l.height,r=parseInt(B.getPropertyValue("max-height"),10),v,g,m=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];if(e.data("elastic")){return}r=r&&r>0?r:90000;if(u.parentNode!==document.body){angular.element(document.body).append(u)}e.css({resize:(y==="none"||y==="vertical")?"none":"horizontal"}).data("elastic",true);function q(){var D=w;v=A;B=getComputedStyle(A);angular.forEach(m,function(E){D+=E+":"+B.getPropertyValue(E)+";"});u.setAttribute("style",D)}function h(){var G,F,D,H,E;if(v!==A){q()}if(!g){g=true;u.value=A.value+i;u.style.overflowY=A.style.overflowY;G=A.style.height===""?"auto":parseInt(A.style.height,10);F=getComputedStyle(A).getPropertyValue("width");if(F.substr(F.length-2,2)==="px"){H=parseInt(F,10)-l.width;u.style.width=H+"px"}D=u.scrollHeight;if(D>r){D=r;E="scroll"}else{if(D<s){D=s}}D+=l.height;A.style.overflowY=E||"hidden";if(G!==D){z.$emit("elastic:resize",e,G,D);A.style.height=D+"px"}a(function(){g=false},1,false)}}function o(){g=false;h()}if("onpropertychange" in A&&"oninput" in A){A.oninput=A.onkeyup=h}else{A.oninput=h}f.bind("resize",o);z.$watch(function(){return x.$modelValue},function(D){o()});z.$on("elastic:adjust",function(){q();o()});a(h,0,false);z.$on("$destroy",function(){d.remove();f.unbind("resize",o)})}}}]);